TopoMaps
========
ROS bindings for the [NrlEvg](https://github.com/wallarelvo/nrl-evg) project

# Description

![](http://aw204.host.cs.st-andrews.ac.uk/main/imgs/topo_map.png)

This project connects the NrlEvg project with ROS. Using an extended
Voronoi graph, we are able to generate a graph such that any two
paths between nodes in the graph will be in different homotopy classes (i.e. they will
be topologically different). The graphs and paths generated by the algorithms
can be used by the motion planning community when the underlying planner
needs a guide the correctly captures the connectivity of the environment. This
differs from previous work because it is connected directly with ROS and the graph
not only contains the geometric paths between nodes, but also contains
information about the topological connectivity between areas in the graph.
This reduces the number of nodes in the graph by around two orders of 
magnitude and thus can improve the algorithmic performance of projects currently
using the EVG algorithm as an underlying planner.

# Installing
To install this repository in your catkin workspace you will first need to
clone the topo_maps repository into the `src/` directory of your workspace.
Once it is cloned, navigate to the `topo_maps/` folder and run the install
script. Afterwards navigate back to the root catkin directory and build the
project. The process is shown below.

```
$ cd [YOUR CATKIN WORKSPACE]/src
$ git clone https://github.com/wallarelvo/topo_maps.git
$ cd topo_maps
$ ./install.sh
$ cd ../../
$ catkin_make
```

# Running
To run the main node, a launch file is provided. This launch file will
run the node with the default parameters and these can be changed by
the user. The parameters that the node takes are described in the
`launch/topo_maps.launch` file. The node will be listening for
nav_msgs/Odometry messages to indicate the current position of the
robot, geometry/Pose messages for the position of the goal, and
nav_msgs/OccupancyGrid messages for the map. Using these three
messages, it is able to determine the *k* (parameter) shortest
paths from the current position to the goal. The *k* shortest paths
each get their own associated topic `/topo_paths/[k]` which returns
a nav_msgs/Path message.

To have the topo_maps node run and be able to listen for positions and
occupancy grids, run:

```
$ roslaunch topo_maps topo_maps.launch
```

After running the node, inspect the topics created and the messages that
are being sent to get a better idea of how to use the system.

# Example
For an example, examine the file `launch/example.launch` which will
show what is necessary to get the system running. In one terminal you
can run:

```
$ roslaunch topo_maps rviz.launch
```

which will open RViz with some predefined settings. Then in another terminal
run:

```
$ roslaunch topo_maps example.launch
```

To understand what is going on, inspect the launch files provided in
the `launch/` directory and run:

```
$ rostopic list
```

to see what topics are made available by the topo_maps node. Once you have
the example running, you will be able to select goal points from RViz by
clicking the 2D Nav Goal button and clicking somewhere on the occupancy grid.
The paths will be computed and shown on the screen.
